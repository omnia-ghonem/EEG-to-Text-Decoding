{% extends "base.html" %}

{% block content %}
<section>
    <h2>Results</h2>
    <div class="rectangle">
        <h3>BART Prediction</h3>
        <p>{{ bart_prediction }}</p>
        <button onclick="playAudio('{{ bart_prediction|e }}')" type="button" aria-label="Play BART prediction">
            <img src="/static/icons/man_voice_icon.png" alt="Play voice" />
        </button>
    </div>
    <div class="rectangle">
        <h3>GPT-4 Refined</h3>
        <p>{{ gpt_refined }}</p>
        <button onclick="playAudio('{{ gpt_refined|e }}')" type="button" aria-label="Play BART prediction">
            <img src="/static/icons/man_voice_icon.png" alt="Play voice" />
        </button>
    </div>
    <a href="/index">Go back</a>
</section>
    <h1>Audio Player</h1>

    <div class="upload-form">
        <h2>Text to Speech</h2>
        <form action="/speak" method="get">
            <input type="text" name="sentence" placeholder="Enter a sentence" required>
            <button type="submit">Generate Audio</button>
        </form>
    </div>

    <div id="audio-container"></div>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.has('audio')) {
            const audioFile = urlParams.get('audio');
            const container = document.getElementById('audio-container');
            container.innerHTML = `
                <div class="file-item">
                    <p>${audioFile}</p>
                    <audio controls>
                        <source src="/static/${audioFile}" type="audio/mpeg">
                        Your browser does not support the audio element.
                    </audio>
                </div>
            `;
        }
    </script>
{% endblock %}
